- name: Write minecraft systemd template files
  no_log: true
  become_user: "{{ minecraft_user }}"
  template:
    src: "{{ item.src }}"
    dest: "/etc/systemd/system/{{ item.path }}"
  with_filetree: templates/systemd

- name: Enable and start minecraft service
  systemd:
    daemon_reload: true
    enabled: true
    state: started
    name: minecraft.service

- name: Enable minecraft backup service and timer
  systemd:
    daemon_reload: true
    enabled: true
    name: "{{ item }}"
  loop:
    - minecraft-backup.service
    - minecraft-backup.timer
